<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>My Stuff</ion-title>
    <ion-buttons slot="end">
      <ion-label>Complete</ion-label>
      <ion-toggle name="showCompletedItems"
                  (ionChange)="onFilterUpdate($event)"
                  value="toggleChanged"
                  checked>
      </ion-toggle>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-grid>
    <ion-row>
      <ion-col size-md="6" offset-md="3">
        <ion-segment (ionChange)="onFilterUpdate($event)" value="all">
          <ion-segment-button value="all">All </ion-segment-button>
          <ion-segment-button value="tagged">Tagged </ion-segment-button>
          <ion-segment-button value="untagged">Un-Tagged </ion-segment-button>
        </ion-segment>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col
        size-md="6"
        offset-md="3"
        class="ion-text-center"
        *ngIf="isLoading"
      >
        <ion-spinner color="primary"></ion-spinner>
      </ion-col>
      <ion-col
        size-md="6"
        offset-md="3"
        *ngIf="!isLoading && (!listedLoadedUtterances || listedLoadedUtterances.length <= 0)"
        class="ion-text-center"
      >
        <p>No Utterances found!</p>
      </ion-col>
      <ion-col
        size-md="6"
        offset-md="3"
        *ngIf="!isLoading && listedLoadedUtterances && listedLoadedUtterances.length > 0"
      >
        <ion-list>
          <ion-item-sliding
            *ngFor="let utterance of listedLoadedUtterances"
            #slidingUtterance
          >
            <ion-item>
              <ion-icon
                *ngIf="utterance.tag.length>0"
                slot="start"
                icon="{{ getIconForTag(utterance.tag) }}"
                color="primary"
              ></ion-icon>
              <ion-label class="ion-text-wrap" color="dark" [style.text-decoration]="utterance.complete ? 'line-through' : 'none'">
                {{ utterance.utterance }}
                <div *ngIf="utterance.urgency" style="display: inline; color: red"><strong>Urgent </strong></div>
                <div *ngIf="utterance.importance" style="display: inline; color: red" ><strong>Important </strong></div>
                <div *ngIf="utterance.project" style="display: inline; color: blue" ><strong>{{utterance.project}}</strong></div>
              </ion-label>
            </ion-item>
            <ion-item-options>
              <ion-item-option
              (click)="onTagUtterance(utterance.id, utterance.tag, utterance.utterance, slidingUtterance)"
              >
              <ion-icon name="pricetag-outline" slot="icon-only"></ion-icon>
            </ion-item-option>
            <ion-item-option color="secondary" (click)="onMarkComplete(utterance.id, slidingUtterance)">
              <ion-icon name="checkbox-outline" slot="icon-only"></ion-icon>
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>
    </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
<ion-footer> <canvas #barChart height="50"></canvas></ion-footer>
