<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>My Stuff</ion-title>
    <ion-buttons slot="end">
      <ion-label>Done</ion-label>
      <ion-toggle name="showCompletedItems"
                  (ionChange)="onFilterUpdate($event)"
                  value="toggleChanged"
                  checked>
      </ion-toggle>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-grid>
    <ion-row>
      <ion-col size-md="6" offset-md="3">
        <ion-segment (ionChange)="onFilterUpdate($event)" value="all">
          <ion-segment-button value="all">All </ion-segment-button>
          <ion-segment-button value="tagged">Tagged </ion-segment-button>
          <ion-segment-button value="untagged">Un-Tagged </ion-segment-button>
        </ion-segment>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col
        size-md="6"
        offset-md="3"
        class="ion-text-center"
        *ngIf="isLoading"
      >
        <ion-spinner color="primary"></ion-spinner>
      </ion-col>
      <ion-col
        size-md="6"
        offset-md="3"
        *ngIf="!isLoading && (!listedLoadedUtterances || listedLoadedUtterances.length <= 0)"
        class="ion-text-center"
      >
        <p>No Utterances found!</p>
      </ion-col>
      <ion-col
        size-md="6"
        offset-md="3"
        *ngIf="!isLoading && listedLoadedUtterances && listedLoadedUtterances.length > 0"
      >
      <ion-list>
        <ng-container *ngFor="let item of displayData">
          <ion-item *ngIf="!(item[0].trim()==='')">
            <h2 >{{item[0]}}</h2>
          </ion-item>
          <ion-item *ngIf="(item[0].trim()==='')">
            <h2 >No Project Assigned</h2>
          </ion-item>



          <ion-item-sliding *ngFor="let item_sub of item[1]"
            #slidingUtterance
          >
            <ion-item>
              <ion-icon
                *ngIf="(item_sub?.tag.length>0) && (showDetailStatus==='tagged')"
                slot="start"
                icon="{{ getIconForTag(item_sub?.tag) }}"
                color="primary"
              ></ion-icon>
              <ion-label class="ion-text-wrap" color="dark" [style.text-decoration]="item_sub.complete ? 'line-through' : 'none'">
                <div *ngIf="item_sub?.urgency" style="display: inline; color: red"><strong>Urgent </strong><br></div>
                <div *ngIf="item_sub?.importance" style="display: inline; color: red" ><strong>Important </strong><br></div>
                {{ item_sub?.utterance }}
                <!-- <div *ngIf="item_sub?.project" style="display: inline; color: blue" ><strong>{{item_sub?.project}}</strong></div> -->
              </ion-label>
            </ion-item>
            <ion-item-options>
              <ion-item-option
              (click)="onTagUtterance(item_sub.id, item_sub.tag, item_sub.utterance, slidingUtterance)"
              >
              <ion-icon name="pricetag-outline" slot="icon-only"></ion-icon>
            </ion-item-option>
            <ion-item-option color="secondary" (click)="onMarkComplete(item_sub.id, slidingUtterance)">
              <ion-icon name="checkbox-outline" slot="icon-only"></ion-icon>
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ng-container>
      </ion-list>
    </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
<ion-footer> <canvas #barChart height="50"></canvas></ion-footer>
