<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>This Month's Money</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="chart-wrapper">
    <canvas
      baseChart
      [datasets]="barChartData"
      [labels]="barChartLabels"
      [options]="barChartOptions"
      [plugins]="barChartPlugins"
      [legend]="barChartLegend"
      [chartType]="barChartType"
      height="75"
    >
    </canvas>
  </div>
  <ion-grid>
    <ion-row>
      <ion-col
        size-md="6"
        offset-md="3"
        class="ion-text-center"
        *ngIf="isLoading"
      >
        <ion-spinner color="primary"></ion-spinner>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col
        size-md="6"
        offset-md="3"
        *ngIf="!isLoading && (!listedLoadedUtterances || listedLoadedUtterances.length <= 0)"
        class="ion-text-center"
      >
        <p>No items found.</p>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col
        size-md="6"
        offset-md="3"
        *ngIf="!isLoading && listedLoadedUtterances && listedLoadedUtterances.length > 0"
      >
        <ion-list>
          <ion-reorder-group
            disabled="false"
            (ionItemReorder)="reorder($event)"
          >
            <ng-container *ngFor="let item of displayData">
              <ion-item *ngIf="!(item[0].trim()==='')">
                <ion-label *ngIf="item[0]==='Forecast'" style="color: rgb(0,0,200); font-weight: bold;">{{item[0]}}</ion-label>
                <ion-label *ngIf="item[0]==='Invoiced'" style="color: rgb(0,175,250); font-weight: bold;">{{item[0]}}</ion-label>
                <ion-label *ngIf="item[0]==='Received'" style="color: rgb(0,200,100); font-weight: bold;">{{item[0]}}</ion-label>
              </ion-item>
              <ion-item *ngIf="(item[0].trim()==='')">
                <h2>No Project Assigned</h2>
              </ion-item>

              <ion-item-sliding
                *ngFor="let item_sub of item[1]"
                #slidingUtterance
              >
                <ion-item>
                  <div *ngIf="item_sub.utterance !== null">
                    <ion-reorder slot="start"></ion-reorder>
                  </div>
                  <ion-label
                    class="ion-text-wrap"
                    color="dark"
                    class="ion-padding"
                  >
                    <div *ngIf="(item_sub.amount) && (item_sub.utterance !== null)" style="font-size: x-small; font-style: italic;">${{ item_sub.amount  | number: '1.2-2'}}</div> {{ item_sub.utterance }}
                  </ion-label>
                </ion-item>
                <ion-item-options>
                  <ion-item-option
                  (click)="onEditItem(item_sub.id)"
                  >
                  <ion-icon name="create-outline" slot="icon-only"></ion-icon>
                </ion-item-option>
             </ion-item-options>
              </ion-item-sliding>
            </ng-container>
          </ion-reorder-group>
        </ion-list>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
